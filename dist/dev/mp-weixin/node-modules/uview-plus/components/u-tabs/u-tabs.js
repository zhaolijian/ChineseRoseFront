"use strict";var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,o=(e,t)=>{for(var i in t||(t={}))r.call(t,i)&&a(e,i,t[i]);if(s)for(var i of s(t))n.call(t,i)&&a(e,i,t[i]);return e},l=(e,s)=>t(e,i(s));const d=require("../../../../common/vendor.js"),c={name:"u-tabs",mixins:[d.mpMixin,d.mixin,d.props$3],data:()=>({firstTime:!0,scrollLeft:0,scrollViewWidth:0,lineOffsetLeft:0,tabsRect:{left:0},innerCurrent:0,moving:!1}),watch:{current:{immediate:!0,handler(e,t){e!==this.innerCurrent&&(this.innerCurrent="string"==typeof e?parseInt(e):e,this.$nextTick(()=>{this.resize()}))}},list(){this.$nextTick(()=>{this.resize()})}},computed:{textStyle(){return e=>{const t={},i=e==this.innerCurrent?d.addStyle(this.activeStyle):d.addStyle(this.inactiveStyle);return this.list[e].disabled&&(t.color="#c8c9cc"),d.deepMerge(i,t)}},propsBadge:()=>d.props$4.badge},mounted(){return e=this,t=null,i=function*(){this.init(),this.windowResizeCallback=e=>{this.init()},d.index.onWindowResize(this.windowResizeCallback)},new Promise((s,r)=>{var n=e=>{try{o(i.next(e))}catch(t){r(t)}},a=e=>{try{o(i.throw(e))}catch(t){r(t)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,a);o((i=i.apply(e,t)).next())});var e,t,i},beforeUnmount(){d.index.offWindowResize(this.windowResizeCallback)},emits:["click","longPress","change","update:current"],methods:{addStyle:d.addStyle,addUnit:d.addUnit,setLineLeft(){const e=this.list[this.innerCurrent];if(!e)return;let t=this.list.slice(0,this.innerCurrent).reduce((e,t)=>e+t.rect.width,0);const i=d.getPx(this.lineWidth);this.lineOffsetLeft=t+(e.rect.width-i)/2,this.firstTime&&setTimeout(()=>{this.firstTime=!1},10)},animation(e,t=0){},clickHandler(e,t){this.$emit("click",l(o({},e),{index:t}),t),e.disabled||this.innerCurrent!=t&&(this.innerCurrent=t,this.resize(),this.$emit("update:current",t),this.$emit("change",l(o({},e),{index:t}),t))},longPressHandler(e,t){this.$emit("longPress",l(o({},e),{index:t}))},init(){d.sleep().then(()=>{this.resize()})},setScrollLeft(){this.innerCurrent<0&&(this.innerCurrent=0);const e=this.list[this.innerCurrent],t=this.list.slice(0,this.innerCurrent).reduce((e,t)=>e+t.rect.width,0),i=d.getWindowInfo().windowWidth;let s=t-(this.tabsRect.width-e.rect.width)/2-(i-this.tabsRect.right)/2+this.tabsRect.left/2;s=Math.min(s,this.scrollViewWidth-this.tabsRect.width),this.scrollLeft=Math.max(0,s)},resize(){0!==this.list.length&&Promise.all([this.getTabsRect(),this.getAllItemRect()]).then(([e,t=[]])=>{e.left>e.width&&(e.right=e.right-Math.floor(e.left/e.width)*e.width,e.left=e.left%e.width),this.tabsRect=e,this.scrollViewWidth=0,t.map((e,t)=>{this.scrollViewWidth+=e.width,this.list[t].rect=e}),this.setLineLeft(),this.setScrollLeft()})},getTabsRect(){return new Promise(e=>{this.queryRect("u-tabs__wrapper__scroll-view").then(t=>e(t))})},getAllItemRect(){return new Promise(e=>{const t=this.list.map((e,t)=>this.queryRect(`u-tabs__wrapper__nav__item-${t}`,!0));Promise.all(t).then(t=>e(t))})},queryRect(e,t){return new Promise(t=>{this.$uGetRect(`.${e}`).then(e=>{t(e)})})}}};if(!Array){(d.resolveComponent("up-icon")+d.resolveComponent("u-badge"))()}Math;const h=d._export_sfc(c,[["render",function(e,t,i,s,r,n){return{a:d.f(e.list,(t,i,s)=>d.e(e.$slots.icon?{a:"icon-"+s,b:d.r("icon",{item:t,keyName:e.keyName,index:i},s)}:d.e({c:t.icon},t.icon?{d:"0546c3e4-0-"+s,e:d.p({name:t.icon,customStyle:n.addStyle(e.iconStyle)})}:{}),e.$slots.content?{f:"content-"+s,g:d.r("content",{item:t,keyName:e.keyName,index:i},s)}:e.$slots.content||!e.$slots.default&&!e.$slots.$default?{j:d.t(t[e.keyName]),k:d.n(t.disabled&&"u-tabs__wrapper__nav__item__text--disabled"),l:d.s(n.textStyle(i))}:{h:"d-"+s,i:d.r("d",{item:t,keyName:e.keyName,index:i},s)},{m:"0546c3e4-1-"+s,n:d.p({show:!(!t.badge||!(t.badge.show||t.badge.isDot||t.badge.value)),isDot:t.badge&&t.badge.isDot||n.propsBadge.isDot,value:t.badge&&t.badge.value||n.propsBadge.value,max:t.badge&&t.badge.max||n.propsBadge.max,type:t.badge&&t.badge.type||n.propsBadge.type,showZero:t.badge&&t.badge.showZero||n.propsBadge.showZero,bgColor:t.badge&&t.badge.bgColor||n.propsBadge.bgColor,color:t.badge&&t.badge.color||n.propsBadge.color,shape:t.badge&&t.badge.shape||n.propsBadge.shape,numberType:t.badge&&t.badge.numberType||n.propsBadge.numberType,inverted:t.badge&&t.badge.inverted||n.propsBadge.inverted,customStyle:"margin-left: 4px;"}),o:i,p:d.o(e=>n.clickHandler(t,i),i),q:d.o(e=>n.longPressHandler(t,i),i),r:`u-tabs__wrapper__nav__item-${i}`,s:d.n(`u-tabs__wrapper__nav__item-${i}`),t:d.n(t.disabled&&"u-tabs__wrapper__nav__item--disabled"),v:d.n(r.innerCurrent==i?"u-tabs__wrapper__nav__item-active":"")})),b:e.$slots.icon,c:e.$slots.content,d:!e.$slots.content&&(e.$slots.default||e.$slots.$default),e:d.s(n.addStyle(e.itemStyle)),f:d.s({flex:e.scrollable?"":1}),g:d.s({width:n.addUnit(e.lineWidth),transform:`translate(${r.lineOffsetLeft}px)`,transitionDuration:`${r.firstTime?0:e.duration}ms`,height:n.addUnit(e.lineHeight),background:e.lineColor,backgroundSize:e.lineBgSize}),h:e.scrollable,i:r.scrollLeft,j:d.n(e.customClass)}}],["__scopeId","data-v-0546c3e4"],["__file","/Users/zhaolijian/Projects/chinese-rose-front/node_modules/uview-plus/components/u-tabs/u-tabs.vue"]]);wx.createComponent(h);
