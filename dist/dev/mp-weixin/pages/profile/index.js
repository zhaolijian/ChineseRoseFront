"use strict";var e=(e,o,r)=>new Promise((s,t)=>{var n=e=>{try{a(r.next(e))}catch(o){t(o)}},i=e=>{try{a(r.throw(e))}catch(o){t(o)}},a=e=>e.done?s(e.value):Promise.resolve(e.value).then(n,i);a((r=r.apply(e,o)).next())});const o=require("../../common/vendor.js"),r=require("../../stores/modules/user.js"),s=require("../../api/modules/auth.js"),t=require("../../utils/tabbar.js");if(require("../../utils/storage.js"),require("../../constants/storage.js"),require("../../utils/logger.js"),require("../../utils/logger-helpers.js"),require("../../utils/request.js"),require("../../constants/request.js"),require("../../utils/error-handler.js"),require("../../types/errorCodes.js"),require("../../utils/base64.js"),!Array){(o.resolveComponent("u-avatar")+o.resolveComponent("u-icon"))()}Math||((()=>"../../node-modules/uview-plus/components/u-avatar/u-avatar.js")+(()=>"../../node-modules/uview-plus/components/u-icon/u-icon.js")+n)();const n=()=>"../../components/common/TabBar.js",i=o.defineComponent({__name:"index",setup(n){const i=r.useUserStore(),a=o.ref(12),u=o.ref(156),l=o.ref(8),c=o.computed(()=>i.userNickname||"阅记用户"),d=o.computed(()=>i.userAvatar||"/static/images/default-avatar.png");o.onMounted(()=>e(this,null,function*(){yield m(),t.safeHideTabBar()})),o.onShow(()=>e(this,null,function*(){yield m(),t.safeHideTabBar()}));const m=()=>e(this,null,function*(){try{const e=yield s.getUserStats();a.value=e.bookCount,u.value=e.noteCount,l.value=e.mindmapCount}catch(e){console.error("加载用户统计失败:",e),a.value=0,u.value=0,l.value=0}}),p=()=>{o.index.showToast({title:"功能开发中",icon:"none"})},h=()=>{o.index.showToast({title:"功能开发中",icon:"none"})},v=()=>{o.index.showToast({title:"功能开发中",icon:"none"})},f=()=>{o.index.showToast({title:"功能开发中",icon:"none"})},g=()=>{o.index.showModal({title:"确认退出",content:"确定要退出登录吗？",success:r=>e(this,null,function*(){if(r.confirm)try{yield i.logout(),o.index.showToast({title:"已退出登录",icon:"success"}),setTimeout(()=>{o.index.reLaunch({url:"/pages/login/login"})},1500)}catch(e){console.error("退出登录失败:",e),o.index.showToast({title:"退出失败",icon:"error"})}})})};return(e,r)=>({a:o.p({src:o.unref(d),size:"64",mode:"aspectFill"}),b:o.t(o.unref(c)),c:o.t(a.value),d:o.t(u.value),e:o.t(l.value),f:o.p({name:"bell",size:"20",color:"#666"}),g:o.p({name:"arrow-right",size:"16",color:"#999"}),h:o.o(p),i:o.p({name:"share-square",size:"20",color:"#666"}),j:o.p({name:"arrow-right",size:"16",color:"#999"}),k:o.o(h),l:o.p({name:"question-circle",size:"20",color:"#666"}),m:o.p({name:"arrow-right",size:"16",color:"#999"}),n:o.o(v),o:o.p({name:"info-circle",size:"20",color:"#666"}),p:o.p({name:"arrow-right",size:"16",color:"#999"}),q:o.o(f),r:o.o(g)})}}),a=o._export_sfc(i,[["__scopeId","data-v-f97f9319"],["__file","/Users/zhaolijian/Projects/chinese-rose-front/src/pages/profile/index.vue"]]);wx.createPage(a);
